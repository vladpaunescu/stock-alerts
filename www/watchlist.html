<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    
    <head>
        <title>Your Company</title>
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
        <link href="css/style.css" rel="stylesheet" type="text/css">
		<script src="jquery.js"></script>
		<script src="help.js"></script>
    </head>
    
    <body>
        <div class="page-out">
            <div class="page-in">
                <div class="page">
                    <div class="main">
                         <div class="header">
                            <div class="header-top">
                                
<h1>Stock <span>Stalker</span></h1>

                            </div>
                            <div class="header-bottom">
                                
<h2>Time is money<br>
Invest in your future</h2>

                            </div>
                            <div class="topmenu">
                                <ul>
                                    <li style="background: transparent none repeat scroll 0% 50%; -moz-background-clip: initial; -moz-background-origin: initial; -moz-background-inline-policy: initial; padding-left: 0px;"><a href="index.html"><span>Home</span></a>

                                    </li>
                                    <li><a href="aboutus.html"><span>About&nbsp;us</span></a>

                                    </li>
                                    <li><a href="whatisnew.html"><span>What's&nbsp;new</span></a>

                                    </li>
                                    <li><a href="Services.html"><span>Services</span></a>

                                    </li>
                                    <li><a href="Contact.html"><span>Contact</span></a>

                                    </li>
                                    <li><a href="Resources.html"><span>Resources</span></a>

                                    </li>
                                    <li><a id="topMeniu7a" href="index.html#" onclick="logout();"><span id="topMeniu7">Logout</span></a>

                                    </li>
                                </ul>
                            </div>
                        </div>
                       <div class="content">
                            <div class="content-left">
								    <div class="mainmenu" id="meniu" style="">
                                    	<h2 class="sidebar1">Main Menu</h2>

                                    <ul>
                                        <li><a href="Your_Account.html">My Account</a>
                                        </li>
                                        <li><a href="Alerts.html">Alerts<span style="color: red;" id="pageAlerts"></span></a>
                                        </li>
                                        <li><a href="Stocks.html">Stocks</a>
                                        </li>
                                        <li><a href="Watchlist.html">Watchlist</a>
                                        </li>
                                        <li><a href="Tutorial.html">Tutorial</a>
                                        </li>
                                    </ul>
                                    <div class="contact">
                                        	<h2 class="sidebar2">Top News</h2>

                                        <div class="streaming id-market-news-stream" id="market-news-stream">	<font size="2">
									<div class="contact-detail">
                                        <p class="green"><strong></strong>
										<div class="cluster">
										<div>
										<a class="googleTitle" href="http://news.google.com/news/url?sa=T&amp;ct=us/0-1-6&amp;fd=S&amp;url=http://www.cnbc.com/id/49860596&amp;cid=43981933757286&amp;ei=bvunUJCPFcPFwAPy-wE&amp;usg=AFQjCNGrLlLxFhbJFaBv9VaxQG11rhTXTA" rel="nofollow" id="n-hp-">Market Outlook: Why Investors May Not Feel Very Thankful</a></div>
				
										<div class="snippet">Market Outlook: Why Investors May Not Feel Very Thankful. Published:...</div><br />
										</div>
										<div class="cluster">
										<div>
										<a class="googleTitle" href="http://news.google.com/news/url?sa=T&amp;ct=us/0-2-5&amp;fd=S&amp;url=http://www.marketwatch.com/story/2-missing-in-wake-of-gulf-of-mexico-oil-rig-fire-2012-11-17%3Flink%3DMW_latest_news&amp;cid=43981934190122&amp;ei=bvunUJCPFcPFwAPy-wE&amp;usg=AFQjCNGyU7xqOyvkEn4RCDAeFmrxFaOa_Q" rel="nofollow" id="n-hp-">2 missing in wake of Gulf of Mexico oil rig fire</a></div>
										
										<div class="snippet">WASHINGTON (MarketWatch) - Government officials continued Saturday to search ....</div><br />
										</div>
										<div class="cluster">
										<div>
										<a class="googleTitle" href="http://news.google.com/news/url?sa=T&amp;ct=us/0-3-6&amp;fd=S&amp;url=http://www.chicagotribune.com/business/ct-biz-1117-tribune-liguori-20121117,0,5736097.story&amp;cid=43981934178476&amp;ei=bvunUJCPFcPFwAPy-wE&amp;usg=AFQjCNHQhUbb8jxC76aevTJTcAHq_JH3Ug" rel="nofollow" id="n-hp-">TV executive Peter Liguori to be new CEO of Tribune Co., sources say</a></div>
									
										<div class="snippet">When Tribune Co. emerges from bankruptcy, the new owners plan to name ...</div><br />
										</div>
										<div class="cluster">
										<div>
										<a class="googleTitle" href="http://news.google.com/news/url?sa=T&amp;ct=us/0-4-6&amp;fd=S&amp;url=http://online.barrons.com/article/SB50001424052748704526104578115292558298904.html%3Fmod%3DBOL_twm_fs&amp;cid=43981933219832&amp;ei=bvunUJCPFcPFwAPy-wE&amp;usg=AFQjCNGfR9nwifNpOy9fzojHLSLys6JiGQ" rel="nofollow" id="n-hp-">Four Ways to Get Extra Yield Without Extra Risk</a></div>
										
										<div class="snippet">With Treasuries yielding next to nothing, investors are looking for new ways ...</div><br />
										</div>
										<div class="cluster">
										<div>
										<a class="googleTitle" href="http://news.google.com/news/url?sa=T&amp;ct=us/0-5-6&amp;fd=S&amp;url=http://www.businessweek.com/articles/2012-11-16/explaining-stuff-you-dont-get-about-the-bp-settlement&amp;cid=43981932984717&amp;ei=bvunUJCPFcPFwAPy-wE&amp;usg=AFQjCNHbCsJUxTzkLg9e3QWhcG_ugQ07CA" rel="nofollow" id="n-hp-">Why $4.5 Billion Doesn't Get BP off the Hook</a></div>
										
										<div class="snippet">BP (BP), as we know, has agreed to an historic settlement with the U.S....</div><br />
										</div></div>
                                    </font>

                                            </p>
                                        </div>
                                    </div>
                                </div>
                      	
                            </div>
                            <div class="content-right">
                                <div class="row1">
                                 	<h1 class="title">Welcome To <span>Watchlist</span></h1>
									 <br/><br/><br/>
									 
									<table id="watchlist" border="1" style="text-align: center;background-color:white;border:1px dotted black;width:80%;border-collapse:collapse;">
									<tr style="background-color:green;color:white;">
									<th style="padding:3px;">Stock</th><th style="padding:3px;">Old value</th><th style="padding:3px;">New value</th><th style="padding:3px;">Change</th><th style="padding:3px;">Delete</th>
									</tr>

									</table>			

									<script>

										function deleteWatchlistItem(id)
										{
											var ajax = new XMLHttpRequest();
											ajax.onreadystatechange = function()
											{
												if(ajax.readyState == 4 && ajax.status==200)
												{
													$("tr[id='"+ id +"']").fadeOut("fast");
													getTopWatchList();
												}
												else
												{
												
												}
												
											}
											ajax.open("POST", "deleteWatchlistItem.php", true);
											ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
											ajax.send("user_id=" + getCookie('userID') + "&stock_id=" + id );
											
										
										}
									
										function getChange(oldVal, newVal)
										{
										
											if ( (newVal - oldVal) > 0 )
											{
												return (((newVal-oldVal)/oldVal * 100) + "").substring(0,5) + '%  <img src="poz.gif"/>';
												
											}
											if ( (newVal - oldVal) < 0 )
											{											
											return (((newVal-oldVal)/oldVal * 100) + "").substring(0,5) + '%  <img src="neg.gif"/>';
											}	
											return '0%  <img src="neg.gif"/>';
										}
										
										function insertWatchlist() 
										{
											var elSel = $('#watchlist');
											var ajax = new XMLHttpRequest();
											ajax.onreadystatechange = function()
											{
												if(ajax.readyState == 4 && ajax.status==200)
												{
													var resp = ajax.responseText.split(",");
													var len=resp.length;
													for (var i=0 ; i<len-1; i= i +4)
													{ 
														elSel.append('<tr id="'+resp[i]+'">'+
														'<td style="padding:3px;">'+resp[i+1]+'</td>'+
														'<td style="padding:3px;">'+resp[i+2]+'</td>'+
														'<td style="padding:3px;">'+resp[i+3]+'</td>'+
														'<td style="padding:3px;">'+(getChange(resp[i+2],resp[i+3]))+'</td>'+
														'<td><a href="#delete" onClick="deleteWatchlistItem('+ resp[i] +')"><img src="del.jpg"/></a></td>'+'</tr>');
													}
												}
												else
												{
												
												}
												
											}
											
											ajax.open("POST", "getWatchlist.php", true);
											ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
											ajax.send("id=" + getCookie('userID') );
										}
										
										insertWatchlist();
														
									function addStockToWatchlist()
									{
										var id = $("#stocksForWatchlist").find(":selected").attr('value');
										
										var ajax = new XMLHttpRequest();
										ajax.onreadystatechange = function()
										{
											if(ajax.readyState == 4 && ajax.status==200)
											{
												document.location.reload();
											}
											else
											{
											
											}
											
										}
										
										ajax.open("POST", "addStockToWatchlist.php", true);
										ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
										ajax.send("user_id=" + getCookie('userID') + "&stock_id=" + id);
											
									}
														
									</script>


									<br/><br/><br/>
									<p style="font-size: 18px;">
									 
									 Add a stock to your watchlist
									 
									 </p>
									 <br/><br/>	
									 
									<table>
									<tr>
									<td><select id="stocksForWatchlist"></select></td>	
									<td><a href="#add" onClick="addStockToWatchlist();"><img src="add.png" style="width:20px; height:20px;"></a></td>
									</tr>
									</table>
										

									<script>
									
										function appendOptionLast(val, text)
											{
											  var elOptNew = document.createElement('option');
											  elOptNew.text = text;
											  elOptNew.value =  val;
											  var elSel = document.getElementById('stocksForWatchlist');

											  try {
												elSel.add(elOptNew, null); // standards compliant; doesn't work in IE
											  }
											  catch(ex) {
												elSel.add(elOptNew); // IE only
											  }
											}

										appendOptionLast("", "Please select a stock ");
										var ajax = new XMLHttpRequest();
										ajax.onreadystatechange = function()
										{
											if(ajax.readyState == 4 && ajax.status==200)
											{
												var resp = ajax.responseText.split(",");
												var len=resp.length;
												for (var i=0 ; i<len-1; i= i +2)
												{ 
													appendOptionLast(resp[i] , resp[i+1]);
												}
											}
											else
											{
											
											}
											
										}
										
										ajax.open("POST", "stocksForWatchlist.php", true);
										ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
										ajax.send("id=" + getCookie('userID') );
																			
									</script>
									 
									 
										
									</table>
							
                                </div>
                             </div>
                            <div class="sections">
                                <div class="section1">
                                    
<h3></h3>

                                    <p>&nbsp;</p>
                                    <p id="sect1"></p>
                                    <p>&nbsp;</p>
                                    <p><a id="rm1" href="#" class="moreSection"></a>

                                    </p>
                                </div>
                                <div class="section2">
                                    
<h3></h3>

                                    <p>&nbsp;</p>
                                    <p id="sect2"></p>
                                    <p>&nbsp;</p>
                                    <p><a id="rm2" href="#" class="moreSection"></a>

                                    </p>
                                </div>
                                <div class="section3">
                                    
<h3></h3>

                                    <p>&nbsp;</p>
                                    <p id="sect3"></p>
                                    <p>&nbsp;</p>
                                    <p><a id="rm3" href="#" class="moreSection"></a>

                                    </p>
                                </div>
                                <div class="section4">
                                    
<h3></h3>

                                    <p>&nbsp;</p>
                                    <p id="sect4"></p>
                                    <p>&nbsp;</p>
                                    <p><a id="rm4" href="#" class="moreSection"></a>

                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="footer">
                            <p>&copy; Copyright 2010. Designed by <a target="_blank" href="http://www.htmltemplates.net">HTML Templates</a>

                                <br>
                            </p>
                            <ul>
                                <li style="border-left: medium none;"><a href="index.html"><span>Home</span></a>

                                </li>
                                <li><a href="#"><span>About&nbsp;us</span></a>

                                </li>
                                <li><a href="#"><span>What's&nbsp;new</span></a>

                                </li>
                                <li><a href="#"><span>Services</span></a>

                                </li>
                                <li><a href="#"><span>Contact</span></a>

                                </li>
                                <li><a href="#"><span>Resources</span></a>

                                </li>
                                <li style="padding-right: 0px;"><a href="#"><span>Links</span></a>

                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
<script>



function loadUserInfo(id)
{
	var ajax = new XMLHttpRequest();
	ajax.onreadystatechange = function()
	{
		if(ajax.readyState == 4 && ajax.status==200)
		{
			var i=1;
			var resp = ajax.responseText.split(",");
			var len=resp.length;
			for ( ; i<len; i++)
			{ 
				$('input[data-id="' +  i + '"]').val(resp[i]);
			}
			pass = resp[2];
			
		}
	}
	ajax.open("POST", "loadUserInfo.php", true);
	ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	ajax.send("id=" + id);
}

loadUserInfo(getCookie('userID'));
	
	
function saveUserInfo()
{
$("#error").hide();
$("#success").hide();
if ( $("#pass")[0].value != $("#pass2")[0].value )
		{
			alert("Password doesn't match.");
			return;
		}

		
var ajax = new XMLHttpRequest();
	ajax.onreadystatechange = function()
	{
		if(ajax.readyState == 4 && ajax.status==200)
		{
			if (ajax.responseText.indexOf('OK') != -1 )
				{
					
					$("#success").show();
				}
			else
				{
					$("#error").show();
				}
		}
		
	}
	
	ajax.open("POST", "saveUserInfo.php", true);
	ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
	ajax.send("id=" + getCookie('userID') +
				"&user="  + $("#username")[0].value + 
				"&pass=" + ( $("#pass")[0].value == '' ? pass : $("#pass")[0].value ) + 
				"&fname=" + $("#fname")[0].value  + 
				"&lname=" + $("#lname")[0].value + 
				"&age=" + $("#age")[0].value  + 
				"&sex=" + $("#sex")[0].value  + 
				"&job=" + $("#job")[0].value  + 
				"&email=" + $("#email")[0].value  + 
				"&tel=" + $("#tel")[0].value   );
		
}
	
</script>
</html>